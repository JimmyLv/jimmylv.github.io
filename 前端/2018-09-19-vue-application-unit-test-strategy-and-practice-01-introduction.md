---
layout: post
title: 'Vue åº”ç”¨å•å…ƒæµ‹è¯•çš„ç­–ç•¥ä¸å®è·µ 01 - å‰è¨€å’Œç›®æ ‡'
categories: [å‰ç«¯]
tags: [Tutorial, UnitTest, ES6, Vue, Jest, Agile, TDD]
published: True
---

## å‰è¨€

æœ¬æ–‡ä¸»è¦å°è¯•è§£å†³ä¸‰ä¸ªé—®é¢˜ï¼š

1. åœ¨ TDD åšå®Œ Tasking åˆ—å®Œå®ä¾‹åŒ–æ•°æ®ä¹‹åï¼Œå®Œå…¨æ²¡æœ‰ UT åŸºç¡€ä¸çŸ¥é“è¯¥æ€ä¹ˆå†™å•å…ƒæµ‹è¯•ï¼Ÿ
2. åœ¨ Vue åº”ç”¨çš„å•å…ƒæµ‹è¯•ä¸­ï¼Œå¯¹ UI ç»„ä»¶å’Œ vuex store ç­‰æµ‹è¯•çš„åŒºåˆ«æœ‰ä½•ä¸åŒï¼Ÿé¢—ç²’åº¦è¯¥ç»†åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿ
3. Vue é¡¹ç›®ä¸­æµ‹è¯•æ”¶ç›Šå¦‚ä½•æœ€å¤§åŒ–ï¼Œå¦‚ä½•é…ç½®é«˜æ€§ä»·æ¯”çš„æµ‹è¯•ç­–ç•¥ï¼Œå³ä»€ä¹ˆåœ°æ–¹æœ€è¯¥èŠ±åŠ›æ°”æµ‹è¯•ï¼Œä»€ä¹ˆåœ°æ–¹åˆå¯ä»¥æš‚ä¸”æ”¾ä¸€æ”¾ï¼Ÿ
4. åœ¨ Vue é¡¹ç›®ä¸­å¦‚ä½•æ¨åŠ¨æ•´ä¸ªå›¢é˜Ÿå¾ªåºæ¸è¿›åœ°é‡‡å–å•å…ƒæµ‹è¯•ç­–ç•¥ï¼Ÿé€æ­¥æé«˜ä»£ç è´¨é‡å’Œæµ‹è¯•è¦†ç›–ç‡ï¼Ÿ

ä¸è°ˆè®ºçš„åŒ…æ‹¬ï¼š

- ATT éªŒæ”¶æµ‹è¯• æˆ– E2E ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œè¿™ä¸ªæ˜¯æˆ‘æƒ³è¿›ä¸€æ­¥æ¢ç´¢çš„è¯é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨ TDD çš„è¯­å¢ƒä¸‹ã€‚[^322](https://github.com/JimmyLv/jimmylv.github.io/issues/322)
- ä¸ºä»€ä¹ˆè¦ TDDï¼Ÿä½†æ˜¯æˆ‘ä¼šè®²ä¸ºä»€ä¹ˆè¦ UT å•å…ƒæµ‹è¯•ã€‚æµ‹è¯•å’Œ TDD æ˜¯ä¸¤ç äº‹ï¼Œè€Œå…‰æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„å¥½å¤„å°±å·²ç»è¶³å¤Ÿå¤šï¼Œä½†æ˜¯å¦‚ä½•åšåˆ°æ›´å¥½çš„è‡ªåŠ¨åŒ–å’ŒæŒç»­é›†æˆï¼Œé‚£å°±éœ€è¦ TDD æ¥æŒ‡å¼•æ–¹å‘ã€‚
- Snapshot Testing å¿«ç…§æµ‹è¯•ï¼Œå…¶å®æˆ‘æ˜¯å¾ˆè®¤å¯å¿«ç…§è¿™ç§å½¢å¼ï¼Œä½†éœ€è¦æ”¹è¿›å…¶å·¥ä½œæµï¼Œè‡³å°‘ç»“åˆ Image Snapshot å’Œ Storybook ç­‰å·¥å…·ï¼Œç”šè‡³æ›´åº”è¯¥æ”¾åˆ° CI ä¸Šå»ã€‚[^311](https://github.com/JimmyLv/jimmylv.github.io/issues/311)

ä¸‹é¢æˆ‘å°±æ¥ç»“åˆå…·ä½“åœºæ™¯ï¼Œè¿›ä¸€æ­¥å®ä¾‹åŒ–è¿™äº›é—®é¢˜ï¼Œä¸¾å‡ ä¸ª ğŸŒ°ï¼š

1\. åœ¨ TDD åšå®Œ Tasking åˆ—å®Œå®ä¾‹åŒ–æ•°æ®ä¹‹åï¼Œå®Œå…¨æ²¡æœ‰ UT åŸºç¡€ä¸çŸ¥é“è¯¥æ€ä¹ˆå†™å•å…ƒæµ‹è¯•ï¼Ÿ

```md
// Given
ä¸€ä¸ªå®Œå…¨æ²¡æœ‰ UT åŸºç¡€çš„æ–°äºº ğŸš¶
// When
å½“ä»– ğŸš¶ é˜…è¯»å’Œç»ƒä¹ æœ¬æ–‡çš„ Jest çš„éƒ¨åˆ†
// Then
ä»–èƒ½å¤ŸæŠŠ Given/When/Then çš„å¥—è·¯å­¦ä¼š
ä»–èƒ½å¤Ÿå­¦ä¼š Jest çš„åŸºæœ¬ç”¨æ³•ï¼ŒåŒ…æ‹¬æµ‹è¯• suite å’Œæ–­è¨€ç­‰è¯­æ³•
ä»–èƒ½å¤Ÿå­¦ä¼š Jest ä¸­æµ‹è¯•å¼‚æ­¥çš„å‡ ç§æ–¹å¼
```

2\. åœ¨ Vue åº”ç”¨çš„å•å…ƒæµ‹è¯•ä¸­ï¼Œå¯¹ UI ç»„ä»¶å’Œ vuex store ç­‰æµ‹è¯•çš„åŒºåˆ«æœ‰ä½•ä¸åŒï¼Ÿé¢—ç²’åº¦è¯¥ç»†åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿ

```md
// Given
ä¸€ä¸ªæœ‰åŸºæœ¬çš„ UT çŸ¥è¯†ä½†æ²¡å†™è¿‡ Vue æµ‹è¯•çš„æ–°äºº ğŸš¶
// When
å½“ä»– ğŸš¶ é˜…è¯»å’Œç»ƒä¹ æœ¬æ–‡çš„ Vue å•å…ƒæµ‹è¯•çš„éƒ¨åˆ†
// Then
å½“ç„¶ï¼Œä»–èƒ½å¤Ÿå­¦ä¼š Vue ç»„ä»¶åœ¨æµ‹è¯•å½“ä¸­çš„å‡ ç§æ¸²æŸ“æ–¹å¼
ä»–èƒ½å¤Ÿå­¦ä¼š UI ç»„ä»¶çš„åˆ†ç±»ï¼Œç‰¹åˆ«æ˜¯äº¤äº’è¡Œä¸ºçš„æµ‹è¯•æ–¹å¼
ä»–èƒ½å¤Ÿå¯¹ Vuex æ¦‚å¿µçš„ç†è§£æ›´åŠ æ·±å…¥ï¼Œä¸”çŸ¥é“ `Redux-like` æ¶æ„çš„å¥½å¤„
ä»–èƒ½å¤Ÿåˆç†æµ‹è¯• vuex store çš„ mutation å’Œ getter ä¸­çš„ä¸šåŠ¡é€»è¾‘
ä»–èƒ½å¤Ÿæµ‹è¯•ç»„ä»¶å¦‚ä½•æ­£ç¡® dispatch action ä»¥åŠ action ä¸­å¦‚ä½•åšå¼‚æ­¥æ“ä½œ
```

3\. Vue é¡¹ç›®ä¸­æµ‹è¯•æ”¶ç›Šå¦‚ä½•æœ€å¤§åŒ–ï¼Œå¦‚ä½•é…ç½®é«˜æ€§ä»·æ¯”çš„æµ‹è¯•ç­–ç•¥ï¼Œå³ä»€ä¹ˆåœ°æ–¹åˆ°åº•è¯¥èŠ±åŠ›æ°”æµ‹è¯•ï¼Œä»€ä¹ˆåœ°æ–¹åˆå¯ä»¥æš‚ä¸”æ”¾ä¸€æ”¾ï¼Ÿ

```md
// Given
ä¸€ä¸ªå…·å¤‡ UT åŸºç¡€ä½†æ‰¾ä¸åˆ°ç€åŠ›ç‚¹çš„æ±‚ç´¢ä¹‹å¾’ ğŸ’
// When
å½“ä»– ğŸš¶ é˜…è¯»æœ¬æ–‡çš„ Vue åº”ç”¨æµ‹è¯•ç­–ç•¥éƒ¨åˆ†
// Then
ä»–èƒ½å¤Ÿæ‰¾åˆ°æµ‹è¯•çš„é‡ç‚¹ï¼Œé‡æ–°ç‡ƒèµ·å¯¹ UT çš„çƒ­æƒ… ğŸ”¥
ä»–èƒ½å¤Ÿåœ¨é¡¹ç›®èƒŒæ™¯ä¸‹åˆç†é…ç½®å•å…ƒæµ‹è¯•çš„æµ‹è¯•ç­–ç•¥
```

äºæ˜¯ä¹ï¼Œè¿™å°±æ˜¯æœ¬ç³»åˆ—æ–‡ç« çš„å¤§çº²ï¼Œå…ˆæ”¾å‡ºæ¥ç»™å¤§å®¶ä¸€ä¸ªå¯¹äº Vue åº”ç”¨å•å…ƒæµ‹è¯•çš„å…¨å±€è§‚ï¼š

```md
## å•å…ƒæµ‹è¯•åŸºç¡€

### ä¸ºä»€ä¹ˆé€‰æ‹© Jest

### Jest çš„åŸºæœ¬ç”¨æ³•

### è¯¥å¦‚ä½•æµ‹è¯•å¼‚æ­¥ä»£ç ï¼Ÿ

### å•å…ƒæµ‹è¯•ä¸è‡ªåŠ¨åŒ–çš„æ„ä¹‰

## Vue å•å…ƒæµ‹è¯•

### Vue ç»„ä»¶çš„æ¸²æŸ“æ–¹å¼

### Wrapper `find()` æ–¹æ³•ä¸é€‰æ‹©å™¨

### UI ç»„ä»¶äº¤äº’è¡Œä¸ºçš„æµ‹è¯•

## Vuex å•å…ƒæµ‹è¯•

### CQRS ä¸ `Redux-like` æ¶æ„

### å¦‚ä½•å¯¹ Vuex è¿›è¡Œå•å…ƒæµ‹è¯•

### Vue ç»„ä»¶å’Œ Vuex store çš„äº¤äº’

## Vue åº”ç”¨æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•çš„ç‰¹ç‚¹åŠå…¶ä½ç½®

### å•å…ƒæµ‹è¯•çš„å…³æ³¨ç‚¹

### åº”ç”¨æµ‹è¯•çš„æµ‹è¯•ç­–ç•¥
```

---

ğŸ˜¯ å“¦è±ï¼Œæ­£æ–‡ç»ˆäºå¼€å§‹â€¦â€¦

---

## ä¸ºä»€ä¹ˆè¦æœ‰å•å…ƒæµ‹è¯•ï¼Ÿ

å¼•ç”¨[å¥½å‹][1]é²œæ˜çš„è§‚ç‚¹å°±æ˜¯ï¼š**å†™ä¸å¥½æ˜¯èƒ½åŠ›é—®é¢˜ï¼Œä¸å†™åˆ™æ˜¯æ€åº¦é—®é¢˜**ã€‚å•å…ƒæµ‹è¯•å®¢è§‚ä¸Šå¯ä»¥è®©å¼€å‘è€…çš„å·¥ä½œæ›´é«˜æ•ˆï¼ŒVue åº”ç”¨çš„å•å…ƒæµ‹è¯•æ˜¯ä¸€å®šè¦çš„ã€‚

### å•å…ƒæµ‹è¯•çš„ä¸Šä¸‹æ–‡

è°ˆä»»ä½•ä¸œè¥¿éƒ½ä¸€å®šè¦æœ‰ä¸ªä¸Šä¸‹æ–‡ã€‚ä½ çš„è®ºè¿°ä¸èƒ½æ˜¯ã€Œå› ä¸ºå•å…ƒæµ‹è¯•æœ‰è¿™äº›å¥½å¤„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšå•å…ƒæµ‹è¯•ã€ï¼Œè€Œåº”è¯¥æ˜¯ã€Œä¸åšå•å…ƒæµ‹è¯•æˆ‘ä»¬ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ã€ï¼Œè¿™æ ·æ‰èƒ½å›ç­”ã€Œä¸ºä»€ä¹ˆè¦å†™å•å…ƒæµ‹è¯•ã€çš„é—®é¢˜ã€‚é‚£ä¹ˆæˆ‘ä»¬è°ˆè®ºå•å…ƒæµ‹è¯•çš„ä¸Šä¸‹æ–‡æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸åšå•å…ƒæµ‹è¯•æˆ‘ä»¬ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ

![agile][image-1]

ä¸Šå›¾ä¸ºä¸€ä¸ªäº§å“ä» idea åˆ†æã€è®¾è®¡ã€å¼€å‘ã€æµ‹è¯•åˆ°äº¤ä»˜å¹¶è·å–å¸‚åœºåé¦ˆçš„è¿‡ç¨‹ã€‚

è€Œ**å•å…ƒæµ‹è¯•çš„ä¸Šä¸‹æ–‡å°±æ˜¯å­˜åœ¨äºã€Œæ•æ·ã€å½“ä¸­**ã€‚æ•æ·ä¸ºçš„æ˜¯æ›´å¿«åœ°äº¤ä»˜æœ‰ä»·å€¼çš„å¯å·¥ä½œçš„è½¯ä»¶ã€‚ä¸ºæ­¤ï¼Œå®ƒæœ‰ä¸€ä¸ªæŒ‡æ ‡æ¥åº¦é‡è¿™ä¸ªã€Œæ›´å¿«ã€ï¼Œé‚£å°±æ˜¯ lead timeï¼Œå®ƒåº¦é‡çš„æ˜¯ä¸€ä¸ª idea ä»æå‡ºè¢«éªŒè¯ï¼Œåˆ°æœ€ç»ˆä¸Šç”Ÿäº§ç¯å¢ƒé¢å¯¹ç”¨æˆ·çš„æ—¶é—´ã€‚æ˜¾ç„¶ï¼Œè¿™ä¸ªæ—¶é—´è¶ŠçŸ­ï¼Œè½¯ä»¶è·å¾—åé¦ˆçš„æ—¶é—´å°±è¶ŠçŸ­ï¼Œå¯¹ä»·å€¼çš„éªŒè¯å°±è¶Šå¿«å‘ç”Ÿã€‚

### å•å…ƒæµ‹è¯•çš„æ„ä¹‰

è¿™ä¸ªç»“è®ºå¯¹æˆ‘ä»¬å†™ä¸å†™å•å…ƒæµ‹è¯•æœ‰ä»€ä¹ˆå½±å“å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œä¸å†™å•å…ƒæµ‹è¯•ï¼Œä½ å°±å¿«ä¸èµ·æ¥ã€‚ä¸ºå•¥å‘¢ï¼Ÿå› ä¸ºæ¯æ¬¡å‘å¸ƒï¼Œä½ éƒ½è¦æŠ•å…¥äººåŠ›æ¥è¿›è¡Œæ‰‹å·¥æµ‹è¯•ï¼›å› ä¸ºæ²¡æœ‰æµ‹è¯•ï¼Œä½ å€¾å‘äºä¸æ•¢éšæ„é‡æ„ï¼Œè¿™åˆå¯¼è‡´ä»£ç é€æ¸è…åŒ–ï¼Œå¤æ‚åº¦ä½¿å¾—ä½ çš„å¼€å‘é€Ÿåº¦é™ä½ã€‚

é‚£ä¹ˆåœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­æ¥è°ˆè¦ä¸è¦å•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆæœ‰æ ¹æ®äº†ï¼Œè€Œä¸æ˜¯â€œå¼€å‘çˆ½äº†å°±ç”¨ï¼Œä¸çˆ½å°±ä¸ç”¨â€è¿™æ ·å«ç³Šçš„ç­”æ¡ˆï¼š

- å¦‚æœä½ è¯´æˆ‘çš„ä¸šåŠ¡éƒ¨é—¨ä¸éœ€è¦é¢‘ç¹ä¸Šçº¿ï¼Œå¹¶ä¸”æˆ‘æœ‰è¶³å¤Ÿçš„äººåŠ›æ¥è¦†ç›–æ‰‹å·¥æµ‹è¯•ï¼Œé‚£ä½ å¯ä»¥ä¸ç”¨å•å…ƒæµ‹è¯•
- å¦‚æœä½ è¯´æˆ‘ä¸åœ¨æ„ä»£ç è…åŒ–ï¼Œå¹¶ä¸”æˆ‘ä¹Ÿä¸åšé‡æ„ï¼Œé‚£ä½ å¯ä»¥ä¸ç”¨å•å…ƒæµ‹è¯•
- å¦‚æœä½ è¯´æˆ‘ä¸åœ¨æ„ä»£ç è´¨é‡ï¼Œå¥½å‡ ä¸ªæ²¡æœ‰æµ‹è¯•ä¿æŠ¤çš„ `if-else` è£¸å¥”ä¹Ÿä¸åœ¨è¯ä¸‹ï¼Œè„‘ä¸å¥½è¿˜åšä»€ä¹ˆç¨‹åºå‘˜ï¼Œé‚£ä½ å¯ä»¥ä¸ç”¨å•å…ƒæµ‹è¯•
- å¦‚æœä½ è¯´æˆ‘ç¡®æœ‰å¿«é€Ÿéƒ¨ç½²çš„éœ€æ±‚ï¼Œä½†æˆ‘ä»¬ä¸ care è´¨é‡é—®é¢˜ï¼Œå‡ºå›å½’é—®é¢˜å°±ä¿®ï¼Œé‚£ä½ å¯ä»¥ä¸ç”¨å•å…ƒæµ‹è¯•

é™¤æ­¤ä¹‹å¤–ï¼Œä½ å°±éœ€è¦å†™å•å…ƒæµ‹è¯•ã€‚å¦‚æœä½ æƒ³éšæ—¶æ•´ç†é‡æ„ä»£ç ï¼Œé‚£ä¹ˆä½ éœ€è¦å†™å•å…ƒæµ‹è¯•ï¼›å¦‚æœä½ æƒ³æœ‰è‡ªåŠ¨åŒ–çš„æµ‹è¯•å¥—ä»¶æ¥å¸®ä½ å¿«é€ŸéªŒè¯æäº¤çš„å®Œæ•´æ€§ï¼Œé‚£ä¹ˆä½ éœ€è¦å†™å•å…ƒæµ‹è¯•ã€‚

### å•å…ƒæµ‹è¯•ä¸è‡ªåŠ¨åŒ–çš„å…³ç³»

![][image-2]

ç»¼ä¸Šï¼Œæˆ‘ä»¬ç”¨æ¥è°ˆè®ºå•å…ƒæµ‹è¯•çš„ã€Œé€é•œã€æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸€è¨€ä»¥è”½ä¹‹ï¼Œä¸¤ç‚¹ï¼š**åé¦ˆé€Ÿåº¦**å’Œ**è‡ªåŠ¨åŒ–**ã€‚

**è‡ªåŠ¨åŒ–**å›ç­”çš„æ˜¯**è¦ä¸è¦è‡ªåŠ¨åŒ–çš„å•å…ƒæµ‹è¯•**è¿™ä¸ªé—®é¢˜ã€‚æµ‹è¯•æ˜¯é‡æ„çš„å”¯ä¸€ä¿éšœï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰æµ‹è¯•ï¼ŒåŸºæœ¬ä¸Šå°±æ²¡æ³•é‡æ„ä»£ç ï¼ˆé‡æ„æŒ‡çš„æ˜¯ [ä¸æ”¹å˜è½¯ä»¶å¯è§‚æµ‹è¡Œä¸ºçš„å‰æä¸‹æ”¹å–„ä»£ç å†…éƒ¨è®¾è®¡æˆ–å®ç°][2] ï¼‰ï¼ŒåŸºæœ¬ä¸Šå°±åªèƒ½çœ‹ç€ä»£ç è…åŒ–ã€‚é‚£ä¹ˆï¼ŒåŸºæœ¬ä¸Šåªè¦ä½ çš„ç³»ç»Ÿéœ€è¦æŒç»­å‘å±•ï¼Œä½ å°±éœ€è¦å•å…ƒæµ‹è¯•ã€‚

**åé¦ˆé€Ÿåº¦**å›ç­”çš„æ˜¯**è¦ä¸è¦ TDDã€æµ‹è¯•å…ˆè¡Œè¿˜æ˜¯åè¡¥**è¿™ä¸ªé—®é¢˜ã€‚ç­”æ¡ˆæ˜¯ï¼Œéœ€è¦ TDDï¼Œæœ€å¥½å…ˆè¡Œï¼Œå› ä¸º[å¯ä»¥æé«˜åé¦ˆé€Ÿåº¦][3]ï¼Œç¼©çŸ­åé¦ˆå‘¨æœŸï¼Œä¸æ­¤åŒæ—¶å‡å°‘ä¸å¿…è¦çš„æµªè´¹ã€‚

å†è€ƒè™‘åˆ°ä»¥ä¸‹ä¸¤å¤§äº‹å®ï¼š**äººå‘˜ä¼šæµåŠ¨ï¼Œåº”ç”¨ä¼šå˜å¤§**ã€‚äººå‘˜ä¸€å®šä¼šæµåŠ¨ï¼Œéœ€æ±‚ä¸€å®šä¼šå¢åŠ ï¼Œç›´è‡³å†ä¹Ÿæ²¡æœ‰ä¸€ä¸ªäººèƒ½å¤Ÿäº†è§£åº”ç”¨çš„æ‰€æœ‰åŠŸèƒ½ï¼Œé‚£æ—¶å¯¹åº”ç”¨åšå‡ºä¿®æ”¹çš„æˆæœ¬å°†å˜å¾—å¾ˆé«˜ã€‚å› æ­¤ï¼Œ**æ„å›¾ä¾èµ–äººã€ä¾èµ–æ‰‹å·¥çš„æ–¹å¼æ¥åº”å¯¹å“åº”åŠ›çš„æŒ‘æˆ˜é¦–å…ˆæ˜¯ä½æ•ˆçš„ï¼Œä»æ—¶é—´ç»´åº¦ä¸Šæ¥è®²ä¹Ÿæ˜¯ä¸å¯èƒ½çš„**ã€‚å› æ­¤ï¼Œä¸ºäº†æœåŠ¡äºâ€œé«˜å“åº”åŠ›â€è¿™ä¸ªç›®æ ‡ï¼Œéšæ—¶é‡æ„æ•´ç†ä»£ç æ˜¯å¿…é¡»çš„ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬æœ‰ä¸€å¥—è‡ªåŠ¨åŒ–çš„æµ‹è¯•å¥—ä»¶ï¼Œå®ƒèƒ½å¸®æˆ‘ä»¬æä¾›å¿«é€Ÿåé¦ˆï¼Œåšè´¨é‡çš„å®ˆå«è€…ã€‚å”¯è§£å†³äº†äººå·¥ã€è´¨é‡çš„è¿™ä¸€ç¯ï¼Œå¼€å‘æ•ˆç‡æ‰èƒ½ç¨³æ­¥æå‡ï¼Œå›¢é˜Ÿå’Œä¼ä¸šçš„é«˜å“åº”åŠ›æ‰å¯èƒ½è¾¾åˆ°ã€‚

è‡³æ­¤ï¼Œå›ç­”äº†ã€Œä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å†™å•å…ƒæµ‹è¯•ã€çš„é—®é¢˜ã€‚ä¸‹é¢è®©æˆ‘ä»¬æ¥è°ˆè°ˆå¦‚ä½•å†™å¥½ JavaScript ä»£ç å’Œ Vue åº”ç”¨æ¡†æ¶çš„å•å…ƒæµ‹è¯•ã€‚

## å¦‚ä½•é€‰æ‹©ä¸€ä¸ªæµ‹è¯•æ¡†æ¶ï¼Ÿ

ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScript ä¸–ç•Œé‡Œæœ€ä¸ç¼ºçš„å°±æ˜¯è½®å­ï¼Œæµ‹è¯•æ¡†æ¶ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å…¶å®è¿™é‡Œçš„å­æ ‡é¢˜å°±æ˜¯ä¸ºä»€ä¹ˆé€‰æ‹© Jestï¼Ÿæœ‰æ—¶å€™å®‰äºç°çŠ¶ï¼Œåªä¸è¿‡æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰è§è¿‡ç†æƒ³çš„æ¨¡æ ·ã€‚åªæœ‰å½“æˆ‘ä»¬è§è¿‡æ›´å¥½çš„ä¸–ç•Œå’Œæ›´å¥½çš„æµ‹è¯•æ¡†æ¶ï¼Œæ‰ä¼šæƒŠå‘¼â€œåŸæ¥ä¸–ç•Œæ˜¯è¿™æ ·ç¾å¥½å‘€ï¼æˆ‘æ€ä¹ˆéƒ½æ²¡æœ‰æƒ³åˆ°å‘¢ï¼Ÿâ€

![][image-3]

> å¼•è‡ª[æŠ€æœ¯é›·è¾¾][4]ï¼šJest æ˜¯ä¸€ä¸ªâ€œé›¶é…ç½®â€çš„å‰ç«¯æµ‹è¯•å·¥å…·ï¼Œå…·æœ‰è¯¸å¦‚æ¨¡æ‹Ÿå’Œä»£ç è¦†ç›–ä¹‹ç±»çš„å¼€ç®±å³ç”¨ç‰¹æ€§ï¼Œä¸»è¦ç”¨äº React å’Œå…¶ä»– JavaScript æ¡†æ¶ã€‚
>
> æˆ‘ä»¬å›¢é˜Ÿå¯¹é‡‡ç”¨ JEST åšå‰ç«¯æµ‹è¯•çš„ç»“æœéå¸¸æ»¡æ„ã€‚å®ƒæä¾›äº†ä¸€ç§â€œé›¶é…ç½®â€çš„å¼€å‘ä½“éªŒï¼Œå¹¶å…·å¤‡è¯¸å¤šå¼€ç®±å³ç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ Mock å’Œä»£ç è¦†ç›–ç‡ç­‰ã€‚ä½ ä¸ä»…å¯ä»¥å°†æ­¤æµ‹è¯•æ¡†æ¶åº”ç”¨äº React.js åº”ç”¨ç¨‹åºï¼Œä¹Ÿå¯ä»¥åº”ç”¨äºå…¶ä»– JavaScript æ¡†æ¶ã€‚Jest ç»å¸¸è¢«ç‚’ä½œçš„åŠŸèƒ½ä¹‹ä¸€æ˜¯ç”¨æˆ·ç•Œé¢çš„å¿«ç…§æµ‹è¯•ã€‚å¿«ç…§æµ‹è¯•å¯ä»¥ä½œä¸ºæµ‹è¯•é‡‘å­—å¡”ä¸Šå±‚ä¸€ä¸ªå¾ˆå¥½çš„è¡¥å……ï¼Œä½†è¯·è®°ä½ï¼Œå•å…ƒæµ‹è¯•ä»ç„¶æ˜¯åšå®çš„åŸºç¡€ã€‚

ä¸€ä¸ªå¥½çš„æµ‹è¯•æ¡†æ¶ï¼ŒJest çš„å‡ å¤§å¥½å¤„å¯ä»¥æ¶µç›–ä¸ºï¼š

- Fast å¤©ä¸‹æ­¦åŠŸï¼Œå”¯å¿«ä¸ç ´ã€‚ç¡®å®å¾ˆå¿«ï¼Œè™½ç„¶å®æµ‹ä¸‹æ¥è·Ÿ [Mocha æ–°ç‰ˆæœ¬][5]è¿˜æ˜¯æ…¢äº†äº›ï¼Œä»¥åæ‰¾ä¸ªæœºä¼šå†æµ‹ä¸€æ¬¡ã€‚
- Opinionated ä¸éœ€è¦ä½ åšå‡ºé€‰æ‹©å’Œé…ç½®ï¼Œå°±èƒ½æä¾›æ‰€æœ‰çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ Mockï¼ˆå¹²æ‰ Sinonï¼‰ã€Test Runnerï¼ˆå¹²æ‰ Karmaï¼‰ã€Matcherï¼ˆå¹²æ‰ Chaiï¼‰ã€Test Coverageï¼ˆå†…ç½® istanbulï¼‰
- Watch Mode å®ˆæŠ¤æ¨¡å¼ã€‚éå¸¸æ³¨é‡å¼€å‘è€…ä½“éªŒï¼Œèƒ½å¤Ÿåœ¨ç¼–ç çš„æ—¶å€™å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿè·å¾—æµ‹è¯•ç»“æœçš„åé¦ˆã€‚
- Snapshot Testing å¿«ç…§æµ‹è¯•ã€‚è¿™æ˜¯å€¼å¾—äº‰è®®çš„ä¸€ç‚¹ï¼Œå‰æ–‡ä¹Ÿæåˆ°è¿‡ä¼šä¸“é—¨å¼€ä¸ª issue æ¥è®¨è®ºï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ã€‚

### æœ€åï¼Œæ€»ç»“ä¸€ä¸‹ Jest

Jest ä½œä¸ºä¸€ä¸ªæµ‹è¯•æ¡†æ¶ï¼Œå…¶æœ€å¤§çš„ç‰¹ç‚¹å°±åœ¨äºå®ƒæ˜¯ä¸€ä¸ªéå¸¸æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œä¸éœ€è¦ä¸å…¶ä»–æµ‹è¯•åº“äº¤äº’æ¥æ‰§è¡Œå®ƒçš„å·¥ä½œã€‚ä¸æ­¤åŒæ—¶ Jest éå¸¸æ³¨é‡[å¼€å‘è€…ä½“éªŒ][6]ï¼Œè¿™ä¸€ç‚¹ä¹Ÿæ˜¯ç‰¹åˆ«å€¼å¾—æ¬£èµï¼Œç°åœ¨å¸‚é¢ä¸Šå…³æ³¨å¼€å‘è€…ï¼ˆâ€œäººâ€ï¼‰ä½“éªŒçš„å¼€å‘æ¡†æ¶å’Œå·¥å…·å®åœ¨ä¸å¤šï¼Œè€Œ Jest Watch æ¨¡å¼çš„æ ¸å¿ƒå°±åœ¨äºå¿«é€Ÿè·å¾—åé¦ˆï¼Œè™½ç„¶æˆ‘æ²¡åœ¨å‘½ä»¤è¡Œä½¿ç”¨è€Œæ˜¯ WebStorm ä½†äº¦å¯ä»¥ä¸ä¹‹ç»“åˆã€‚

ps: é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå¼€å‘è€…ä½“éªŒäº¦å€¼å¾—ç»†ç»†å“å‘³ä¸å‘ç°ï¼Œç‰¹åˆ«æ˜¯ Jest æœ¬èº«æ¥è‡ª Facebook çš„å·¥ç¨‹åŒ–æ”¯æŒä¹Ÿæ˜¯ç‰¹åˆ«æ£’çš„ï¼Œè¿™ä¸ªè®²è¿°å¦‚ä½•å¼€å‘ Jest çš„å®˜æ–¹è§†é¢‘å€¼å¾—ä¸€çœ‹ï¼š[Building High-Quality JavaScript Tools][7]ã€‚

## æœªå®Œå¾…ç»­â€¦â€¦

**\## å•å…ƒæµ‹è¯•åŸºç¡€**

- [x] ### ä¸ºä»€ä¹ˆé€‰æ‹© Jest
- [ ] ### Jest çš„åŸºæœ¬ç”¨æ³•
- [ ] ### è¯¥å¦‚ä½•æµ‹è¯•å¼‚æ­¥ä»£ç ï¼Ÿ
- [ ] ### å•å…ƒæµ‹è¯•ä¸è‡ªåŠ¨åŒ–çš„æ„ä¹‰

**\## Vue å•å…ƒæµ‹è¯•**

- [ ] ### Vue ç»„ä»¶çš„æ¸²æŸ“æ–¹å¼
- [ ] ### Wrapper `find()` æ–¹æ³•ä¸é€‰æ‹©å™¨
- [ ] ### UI ç»„ä»¶äº¤äº’è¡Œä¸ºçš„æµ‹è¯•

**\## Vuex å•å…ƒæµ‹è¯•**

- [ ] ### CQRS ä¸ `Redux-like` æ¶æ„
- [ ] ### å¦‚ä½•å¯¹ Vuex è¿›è¡Œå•å…ƒæµ‹è¯•
- [ ] ### Vue ç»„ä»¶å’Œ Vuex store çš„äº¤äº’

**\## Vue åº”ç”¨æµ‹è¯•ç­–ç•¥**

- [ ] ### å•å…ƒæµ‹è¯•çš„ç‰¹ç‚¹åŠå…¶ä½ç½®
- [ ] ### å•å…ƒæµ‹è¯•çš„å…³æ³¨ç‚¹
- [ ] ### åº”ç”¨æµ‹è¯•çš„æµ‹è¯•ç­–ç•¥

æˆ‘çš„åšå®¢å³å°†åŒæ­¥è‡³è…¾è®¯äº‘+ç¤¾åŒºï¼Œé‚€è¯·å¤§å®¶ä¸€åŒå…¥é©»ï¼šhttps://cloud.tencent.com/developer/support-plan?invite_code=5jtaw8aqdjnd

[1]: https://github.com/linesh-simplicity/linesh-simplicity.github.io/issues/122
[2]: https://www.martinfowler.com/bliki/DefinitionOfRefactoring.html
[3]: https://github.com/linesh-simplicity/linesh-simplicity.github.io/issues/197
[4]: https://www.thoughtworks.com/cn/radar/languages-and-frameworks/jest
[5]: https://github.com/mochajs/mocha/blob/master/CHANGELOG.md
[6]: https://www.thoughtworks.com/talks/developer-exp-tech-radar-summit-05-2017
[7]: https://developers.facebook.com/videos/f8-2017/building-high-quality-javascript-tools/
[image-1]: https://user-images.githubusercontent.com/11895199/40921436-03152e66-6842-11e8-9c24-920ba5d8dd27.png
[image-2]: https://raw.staticdn.net/JimmyLv/images/master/images/2018/20181029222614.png
[image-3]: https://raw.staticdn.net/JimmyLv/images/master/images/jest.png
